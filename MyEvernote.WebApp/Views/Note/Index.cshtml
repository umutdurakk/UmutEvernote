@model IEnumerable<MyEvernote.Entities.Note>
@using MyEvernote.WebApp.Models
@using MyEvernote.WebApp.Controllers

@{ ViewBag.Title = "Notlarım"; }

<style>
    .text-warning {
        background-color: #343a40;
        color: yellow;
    }
    .text-info {
        background-color: #343a40;
        color: darkblue;
    }
    .text-danger {
        background-color: #343a40;
        color: red;
    }
    .text-success {
        background-color: #343a40;
        color: lawngreen;
    }
    .text-justify {
        background-color: #343a40;
        color:darkorchid;
    }

</style>
<body>
    <div class="row ml-lg-2 mr-lg-2 mt-3">

        <div class="col ">
            <h2 class="text-center">@ViewBag.Title</h2>

        </div>
    </div>
    <div class="row ml-lg-2 mr-lg-2">
        <div class="col">
            <p>
                @Bootstrap.LinkButton("/Note/Create","light", "text-warning", string.Empty, "plus", "")
            </p>
            <table class="table table-bordered">
                <thead class="thead-dark" style="">
                    <tr>
                        <th scope="col">
                            @Html.DisplayNameFor(model => model.NoteImageFilename)
                        </th>
                        <th scope="col">
                            @Html.DisplayNameFor(model => model.Category.Title)
                        </th>
                        <th scope="col">
                            @Html.DisplayNameFor(model => model.Title)
                        </th>
                        <th scope="col">
                            @Html.DisplayNameFor(model => model.Text)
                        </th>
                        <th scope="col">
                            @Html.DisplayNameFor(model => model.IsDraft)
                        </th>
                        <th scope="col">
                            @Html.DisplayNameFor(model => model.LikeCount)
                        </th>
                        <th scope="col">

                        </th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                    <tr >
                        <td>
                            <div class="card-img-bottom">
                                <img src="~/NoteImages/@Html.DisplayFor(modelItem => item.NoteImageFilename)" height="50" width="50" class="img-fluid center-block ml-4" alt="user">
                            </div>
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Category.Title)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Title)
                        </td>
                        <td>
                            
                            @if (string.IsNullOrEmpty(item.Text) == false && item.Text.Length > 200)
                            {
                                @(item.Text.Substring(0,200)+ "...")

                            }
                            else
                            {
                                @item.Text

                                if (item.Text.Length < 55)
                                {
                                    <br />
                                    <br />
                                }
                            }
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.IsDraft)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.LikeCount)
                        </td>
                        <td  class="text-center "width="210">
                            <button data-note-id="@item.Id" type="button" class="btn btn-light mt-2 text-success btn-sm" data-toggle="modal" data-target="#modal_comment"><span class="fa fa-comment"></span></button>
                            @if (CurrentSession.User.IsAdmin == true)
                            {
                                @Bootstrap.LinkButton("/Note/Edit/" + item.Id, "light", "text-info btn-sm mt-2", "Düzenle", "edit", string.Empty)
                                @Bootstrap.LinkButton("/Note/Details/" + item.Id, "light", "text-justify btn-sm mt-2", "Detaylar", "search", string.Empty)
                                @Bootstrap.LinkButton("/Note/Delete/" + item.Id, "light", "text-danger btn-sm mt-2", "Kaldır", "trash", string.Empty)
                            }
                            else if (item.Owner.Id == CurrentSession.User.Id)
                            {
                                @Bootstrap.LinkButton("/Note/Edit/" + item.Id, "light", "text-info btn-sm mt-2", "Düzenle ", "edit", string.Empty)
                                @Bootstrap.LinkButton("/Note/Details/" + item.Id, "light", "text-justify btn-sm mt-2", "Detaylar", "search", string.Empty)
                                @Bootstrap.LinkButton("/Note/Delete/" + item.Id, "light", "text-danger btn-sm mt-2", "Kaldır", "trash", string.Empty)
                            }

                            else
                            {
                                @Bootstrap.LinkButton("/Note/Details/" + item.Id, "light", "text-justify btn-sm mt-2", "Detaylar", "search", string.Empty)
                            }

                        </td>
                    </tr>
}
                </tbody>
            </table>

        </div>

    </div>

    @Bootstrap.ModalPopup(id: "modal_comment", title: "Yorumlar")

    <script src="~/Scripts/comment.js"></script>
</body>